Node.js v20.19.6
Application exited with code 1. This usually indicates an application failure. Check that the command used to launch your application is correct.
Instance stopped.
Instance created. Preparing to start...
Using MySQL/TiDB database
Database connection ready
Push subscriptions table ready
Not on Replit - auth routes disabled
12:41:58 AM [express] serving on port 8000
Instance is healthy. All health checks are passing.
/app/dist/index.cjs:3057
`)},a.toFunction=function(o){o||(o={});var c="return ("+a.toString()+")";Object.keys(a.scope).forEach(function(E){o[E]||(o[E]=a.scope[E])});var u=Object.keys(o).map(function(E){return E}),l=u.map(function(E){return o[E]});return Function.apply(null,u.concat(c)).apply(null,l)},arguments.length&&a.apply(null,arguments),a};xL.formats=wL;BL.exports=xL});var UL=g((Hde,LL)=>{"use strict";var it=or(),IK=Si(),Jr=au(),NK=Fg(),TK=Zc(),ML=[];for(let n in it)ML[it[n]]=n;function CK(n,e,t,r,s){let a=!!(s.supportBigNumbers||r.supportBigNumbers),o=!!(s.bigNumberStrings||r.bigNumberStrings),c=s.timezone||r.timezone,u=s.dateStrings||r.dateStrings;switch(n){case it.TINY:case it.SHORT:case it.LONG:case it.INT24:case it.YEAR:return"packet.parseLengthCodedIntNoBigCheck()";case it.LONGLONG:return a&&o?"packet.parseLengthCodedIntString()":`packet.parseLengthCodedInt(${a})`;case it.FLOAT:case it.DOUBLE:return"packet.parseLengthCodedFloat()";case it.NULL:return"packet.readLengthCodedNumber()";case it.DECIMAL:case it.NEWDECIMAL:return r.decimalNumbers?"packet.parseLengthCodedFloat()":'packet.readLengthCodedString("ascii")';case it.DATE:return Jr.typeMatch(n,u,it)?'packet.readLengthCodedString("ascii")':`packet.parseDate(${Jr.srcEscape(c)})`;case it.DATETIME:case it.TIMESTAMP:return Jr.typeMatch(n,u,it)?'packet.readLengthCodedString("ascii")':`packet.parseDateTime(${Jr.srcEscape(c)})`;case it.TIME:return'packet.readLengthCodedString("ascii")';case it.GEOMETRY:return"packet.parseGeometryValue()";case it.VECTOR:return"packet.parseVector()";case it.JSON:return r.jsonStrings?'packet.readLengthCodedString("utf8")':'JSON.parse(packet.readLengthCodedString("utf8"))';default:return e===IK.BINARY?"packet.readLengthCodedBuffer()":`packet.readLengthCodedString(${t})`}}function OK(n,e,t){typeof t.typeCast=="function"&&typeof e.typeCast!="function"&&(e.typeCast=t.typeCast);function r(E,p){return{type:ML[E.columnType],length:E.columnLength,db:E.schema,table:E.table,name:E.name,string:function(_=E.encoding){return E.columnType===it.JSON&&_===E.encoding&&console.warn(`typeCast: JSON column "${E.name}" is interpreted as BINARY by default, recommended to manually set utf8 encoding: \`field.string("utf8")\``),p.packet.readLengthCodedString(_)},buffer:function(){return p.packet.readLengthCodedBuffer()},geometry:function(){return p.packet.parseGeometryValue()}}}let s=NK();s("(function () {")("return class TextRow {"),s("constructor(fields) {"),typeof e.typeCast=="function"&&(s("const _this = this;"),s("for(let i=0; i<fields.length; ++i) {"),s("this[`wrap${i}`] = wrap(fields[i], _this);"),s("}")),s("}"),s("next(packet, fields, options) {"),s("this.packet = packet;"),e.rowsAsArray?s(`const result = new Array(${n.length});`):s("const result = {};");let a={},o=[];if(e.nestTables===!0){for(let E=0;E<n.length;E++)a[n[E].table]=1;o=Object.keys(a);for(let E=0;E<o.length;E++)s(`result[${Jr.fieldEscape(o[E])}] = {};`)}let c="",u="",l="";for(let E=0;E<n.length;E++)if(u=Jr.fieldEscape(n[E].name),typeof e.nestTables=="string"?c=`result[${Jr.fieldEscape(n[E].table+e.nestTables+n[E].name)}]`:e.nestTables===!0?(l=Jr.fieldEscape(n[E].table),s(`if (!result[${l}]) result[${l}] = {};`),c=`result[${l}][${u}]`):e.rowsAsArray?c=`result[${E.toString(10)}]`:c=`result[${u}]`,e.typeCast===!1)s(`${c} = packet.readLengthCodedBuffer();`);else{let p=`fields[${E}].encoding`,_=CK(n[E].columnType,n[E].characterSet,p,t,e);typeof e.typeCast=="function"?s(`${c} = options.typeCast(this.wrap${E}, function() { return ${_} });`):s(`${c} = ${_};`)}return s("return result;"),s("}"),s("};")("})()"),t.debug&&Jr.printDebugWithCode("Compiled text protocol row parser",s.toString()),typeof e.typeCast=="function"?s.toFunction({wrap:r}):s.toFunction()}function SK(n,e,t){return TK.getParser("text",n,e,t,OK)}LL.exports=SK});var GL=g((jde,FL)=>{"use strict";var st=or(),yK=Si(),bs=au(),PL=[];for(let n in st)PL[st[n]]=n;function vK({packet:n,type:e,charset:t,encoding:r,config:s,options:a}){let o=!!(a.supportBigNumbers||s.supportBigNumbers),c=!!(a.bigNumberStrings||s.bigNumberStrings),u=a.timezone||s.timezone,l=a.dateStrings||s.dateStrings;switch(e){case st.TINY:case st.SHORT:case st.LONG:case st.INT24:case st.YEAR:return n.parseLengthCodedIntNoBigCheck();case st.LONGLONG:return o&&c?n.parseLengthCodedIntString():n.parseLengthCodedInt(o);case st.FLOAT:case st.DOUBLE:return n.parseLengthCodedFloat();case st.NULL:case st.DECIMAL:case st.NEWDECIMAL:return s.decimalNumbers?n.parseLengthCodedFloat():n.readLengthCodedString("ascii");case st.DATE:return bs.typeMatch(e,l,st)?n.readLengthCodedString("ascii"):n.parseDate(u);case st.DATETIME:case st.TIMESTAMP:return bs.typeMatch(e,l,st)?n.readLengthCodedString("ascii"):n.parseDateTime(u);case st.TIME:return n.readLengthCodedString("ascii");case st.GEOMETRY:return n.parseGeometryValue();case st.VECTOR:return n.parseVector();case st.JSON:return s.jsonStrings?n.readLengthCodedString("utf8"):JSON.parse(n.readLengthCodedString("utf8"));default:return t===yK.BINARY?n.readLengthCodedBuffer():n.readLengthCodedString(r)}}function DK(n,e){return{type:PL[n.columnType],length:n.columnLength,db:n.schema,table:n.table,name:n.name,string:function(t=n.encoding){return n.columnType===st.JSON&&t===n.encoding&&console.warn(`typeCast: JSON column "${n.name}" is interpreted as BINARY by default, recommended to manually set utf8 encoding: \`field.string("utf8")\``),e.readLengthCodedString(t)},buffer:function(){return e.readLengthCodedBuffer()},geometry:function(){return e.parseGeometryValue()}}}function bK(n,e,t){return{next(r,s,a){let o=a.rowsAsArray?[]:{};for(let c=0;c<s.length;c++){let u=s[c],l=a.typeCast?a.typeCast:t.typeCast,E=()=>vK({packet:r,type:u.columnType,encoding:u.encoding,charset:u.characterSet,config:t,options:a}),p;if(a.typeCast===!1?p=r.readLengthCodedBuffer():typeof l=="function"?p=l(DK(u,r),E):p=E(),a.rowsAsArray)o.push(p);else if(typeof a.nestTables=="string")o[`${bs.fieldEscape(u.table,!1)}${a.nestTables}${bs.fieldEscape(u.name,!1)}`]=p;else if(a.nestTables){let _=bs.fieldEscape(u.table,!1);o[_]||(o[_]={}),o[_][bs.fieldEscape(u.name,!1)]=p}else o[bs.fieldEscape(u.name,!1)]=p}return o}}}FL.exports=bK});var Vg=g((qde,YL)=>{"use strict";var QL=require("process"),Gg=require("timers"),wK=require("stream").Readable,xK=qn(),Za=jn(),BK=UL(),MK=GL(),VL=hg(),Qg=new Za.Packet(0,Buffer.allocUnsafe(4),0,4),ou=class n extends xK{constructor(e,t){super(),this.sql=e.sql,this.values=e.values,this._queryOptions=e,this.namedPlaceholders=e.namedPlaceholders||!1,this.onResult=t,this.timeout=e.timeout,this.queryTimeout=null,this._fieldCount=0,this._rowParser=null,this._fields=[],this._rows=[],this._receivedFieldsCount=0,this._resultIndex=0,this._localStream=null,this._unpipeStream=function(){},this._streamFactory=e.infileStreamFactory,this._connection=null}then(){let e="You have tried to call .then(), .catch(), or invoked await on the result of query that is not a promise, which is a programming error. Try calling con.promise().query(), or require('mysql2/promise') instead of 'mysql2' for a promise-compatible version of the query interface. To learn how to use async/await or Promises check out documentation at https://sidorares.github.io/node-mysql2/docs#using-promise-wrapper, or the mysql2 documentation at https://sidorares.github.io/node-mysql2/docs/documentation/promise-wrapper";throw console.log(e),new Error(e)}start(e,t){t.config.debug&&console.log("        Sending query command: %s",this.sql),this._connection=t,this.options=Object.assign({},t.config,this._queryOptions),this._setTimeout();let r=new Za.Query(this.sql,t.config.charsetNumber);return t.writePacket(r.toPacket(1)),n.prototype.resultsetHeader}done(){if(this._unpipeStream(),this.timeout&&!this.queryTimeout)return null;if(this.queryTimeout&&(Gg.clearTimeout(this.queryTimeout),this.queryTimeout=null),this.onResult){let e,t;this._resultIndex===0?(e=this._rows[0],t=this._fields[0]):(e=this._rows,t=this._fields),t?QL.nextTick(()=>{this.onResult(null,e,t)}):QL.nextTick(()=>{this.onResult(null,e)})}return null}doneInsert(e){return this._localStreamError?(this.onResult?this.onResult(this._localStreamError,e):this.emit("error",this._localStreamError),null):(this._rows.push(e),this._fields.push(void 0),this.emit("fields",void 0),this.emit("result",e),e.serverStatus&VL.SERVER_MORE_RESULTS_EXISTS?(this._resultIndex++,this.resultsetHeader):this.done())}resultsetHeader(e,t){let r=new Za.ResultSetHeader(e,t);return this._fieldCount=r.fieldCount,t.config.debug&&console.log(`        Resultset header received, expecting ${r.fieldCount} column definition packets`),this._fieldCount===0?this.doneInsert(r):this._fieldCount===null?this._streamLocalInfile(t,r.infileName):(this._receivedFieldsCount=0,this._rows.push([]),this._fields.push([]),this.readField)}_streamLocalInfile(e,t){if(this._streamFactory)this._localStream=this._streamFactory(t);else return this._localStreamError=new Error(`As a result of LOCAL INFILE command server wants to read ${t} file, but as of v2.0 you must provide streamFactory option returning ReadStream.`),e.writePacket(Qg),this.infileOk;let r=()=>{this._unpipeStream()},s=()=>{this._localStream.resume()},a=()=>{this._localStream.pause()},o=function(l){let E=Buffer.allocUnsafe(l.length+4);l.copy(E,4),e.writePacket(new Za.Packet(0,E,0,E.length))},c=()=>{e.removeListener("error",r),e.writePacket(Qg)},u=l=>{this._localStreamError=l,e.removeListener("error",r),e.writePacket(Qg)};return this._unpipeStream=()=>{e.stream.removeListener("pause",a),e.stream.removeListener("drain",s),this._localStream.removeListener("data",o),this._localStream.removeListener("end",c),this._localStream.removeListener("error",u)},e.stream.on("pause",a),e.stream.on("drain",s),this._localStream.on("data",o),this._localStream.on("end",c),this._localStream.on("error",u),e.once("error",r),this.infileOk}readField(e,t){if(this._receivedFieldsCount++,this._fields[this._resultIndex].length!==this._fieldCount){let r=new Za.ColumnDefinition(e,t.clientEncoding);this._fields[this._resultIndex].push(r),t.config.debug&&(console.log("        Column definition:"),console.log(`          name: ${r.name}`),console.log(`          type: ${r.columnType}`),console.log(`         flags: ${r.flags}`))}if(this._receivedFiel
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
Error: Unknown column 'created_by' in 'field list'
    at mu.query (/app/dist/index.cjs:3057:51858)
    at n_.execute (/app/dist/index.cjs:3063:30141)
    at qp.execute (/app/dist/index.cjs:3063:20441)
    at qp.then (/app/dist/index.cjs:63:37590)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  code: 'ER_BAD_FIELD_ERROR',
  errno: 1054,
  sql: "select `id`, `date`, `start_time`, `duration`, `client`, `client_id`, `service`, `staff`, `price`, `total`, `paid`, `loyalty_points_earned`, `created_by`, `created_at` from `appointments` where `appointments`.`date` = '2026-01-06'",
  sqlState: '42S22',
  sqlMessage: "Unknown column 'created_by' in 'field list'"
}
Node.js v20.19.6
Using MySQL/TiDB database
Application exited with code 1. This usually indicates an application failure. Check that the command used to launch your application is correct.
Instance is unhealthy. Attempting recovery...
Instance is healthy. All health checks are passing.
Database connection ready
Push subscriptions table ready
Not on Replit - auth routes disabled
