Instance created. Preparing to start...
Using MySQL/TiDB database
Database connection ready
Push subscriptions table ready
Not on Replit - auth routes disabled
5:20:59 PM [express] serving on port 8000
Instance is healthy. All health checks are passing.
/app/dist/index.cjs:3109
      `);console.log("Push subscriptions table ready")}catch(n){console.error("Failed to create push_subscriptions table:",n)}}Ya();Ya();var e0=class{async getUser(e){let t=ee(),[r]=await z().select().from(t.users).where(se(t.users.id,e));return r}async upsertUser(e){let t=ee();await this.getUser(e.id)?await z().update(t.users).set({...e,updatedAt:new Date}).where(se(t.users.id,e.id)):await z().insert(t.users).values(e);let[s]=await z().select().from(t.users).where(se(t.users.id,e.id));return s}},Pi=new e0;var t0=class{getUser=Pi.getUser;upsertUser=Pi.upsertUser;async getAppointments(e){let t=ee();return e?await z().select().from(t.appointments).where(se(t.appointments.date,e)):await z().select().from(t.appointments)}async getAppointmentsByDateRange(e,t){let r=ee();return await z().select().from(r.appointments).where(Cn(wc(r.appointments.date,e),xc(r.appointments.date,t)))}async getAppointment(e){let t=ee(),[r]=await z().select().from(t.appointments).where(se(t.appointments.id,e));return r}async createAppointment(e){let t=ee(),[r]=await z().insert(t.appointments).values(e).returning();return r}async updateAppointment(e,t){let r=ee(),[s]=await z().update(r.appointments).set(t).where(se(r.appointments.id,e)).returning();return s}async deleteAppointment(e){let t=ee();await z().delete(t.appointments).where(se(t.appointments.id,e))}async getServices(){let e=ee();return await z().select().from(e.services)}async createService(e){let t=ee(),[r]=await z().insert(t.services).values(e).returning();return r}async updateService(e,t){let r=ee(),[s]=await z().update(r.services).set(t).where(se(r.services.id,e)).returning();return s}async deleteService(e){let t=ee();await z().delete(t.services).where(se(t.services.id,e))}async getCategories(){let e=ee();return await z().select().from(e.categories)}async createCategory(e){let t=ee(),[r]=await z().insert(t.categories).values(e).returning();return r}async updateCategory(e,t){let r=ee(),[s]=await z().update(r.categories).set(t).where(se(r.categories.id,e)).returning();return s}async deleteCategory(e){let t=ee();await z().delete(t.categories).where(se(t.categories.id,e))}async getStaff(){let e=ee();return await z().select().from(e.staff)}async createStaff(e){let t=ee(),[r]=await z().insert(t.staff).values(e).returning();return r}async updateStaff(e,t){let r=ee(),[s]=await z().update(r.staff).set(t).where(se(r.staff.id,e)).returning();return s}async deleteStaff(e){let t=ee();await z().delete(t.staff).where(se(t.staff.id,e))}async getProducts(){let e=ee();return await z().select().from(e.products)}async getProduct(e){let t=ee(),[r]=await z().select().from(t.products).where(se(t.products.id,e));return r}async getProductByName(e){let t=ee(),[r]=await z().select().from(t.products).where(se(t.products.name,e));return r}async getLowStockProducts(){let e=ee();return(await z().select().from(e.products)).filter(r=>r.quantity<=r.lowStockThreshold)}async updateProductQuantity(e,t){let r=ee(),[s]=await z().update(r.products).set({quantity:t}).where(se(r.products.id,e)).returning();if(!s)throw new Error("Product not found");return s}async updateProduct(e,t){let r=ee(),[s]=await z().update(r.products).set(t).where(se(r.products.id,e)).returning();return s}async createProduct(e){let t=ee(),[r]=await z().insert(t.products).values(e).returning();return r}async deleteProduct(e){let t=ee();await z().delete(t.products).where(se(t.products.id,e))}async getClients(){let e=ee();return await z().select().from(e.clients).orderBy(Gr(e.clients.createdAt))}async getClient(e){let t=ee(),[r]=await z().select().from(t.clients).where(se(t.clients.id,e));return r}async createClient(e){let t=ee(),[r]=await z().insert(t.clients).values(e).returning();return r}async updateClient(e,t){let r=ee(),[s]=await z().update(r.clients).set(t).where(se(r.clients.id,e)).returning();return s}async deleteClient(e){let t=ee();await z().delete(t.clients).where(se(t.clients.id,e))}async updateClientLoyalty(e,t,r){let s=ee(),[a]=await z().select().from(s.clients).where(se(s.clients.id,e));if(!a)throw new Error("Client not found");let[o]=await z().update(s.clients).set({loyaltyPoints:a.loyaltyPoints+t,totalVisits:a.totalVisits+1,totalSpent:a.totalSpent+r}).where(se(s.clients.id,e)).returning();return o}async getClientAppointments(e){let t=ee();return await z().select().from(t.appointments).where(se(t.appointments.clientId,e)).orderBy(Gr(t.appointments.date))}async getCharges(){let e=ee();return await z().select().from(e.charges).orderBy(Gr(e.charges.createdAt))}async createCharge(e){let t=ee(),[r]=await z().insert(t.charges).values(e).returning();return r}async deleteCharge(e){let t=ee();await z().delete(t.charges).where(se(t.charges.id,e))}async getStaffDeductions(){let e=ee();return await z().select().from(e.staffDeductions).orderBy(Gr(e.staffDeductions.createdAt))}async createStaffDeduction(e){let t=ee(),[r]=await z().insert(t.staffDeductions).values(e).returning();return r}async deleteStaffDeduction(e){let t=ee();await z().delete(t.staffDeductions).where(se(t.staffDeductions.id,e))}async getExpenseCategories(){let e=ee();return await z().select().from(e.expenseCategories)}async createExpenseCategory(e){let t=ee(),[r]=await z().insert(t.expenseCategories).values(e).returning();return r}async deleteExpenseCategory(e){let t=ee();await z().delete(t.expenseCategories).where(se(t.expenseCategories.id,e))}async getLoyaltyRedemptions(e){let t=ee();return e?await z().select().from(t.loyaltyRedemptions).where(se(t.loyaltyRedemptions.clientId,e)).orderBy(Gr(t.loyaltyRedemptions.createdAt)):await z().select().from(t.loyaltyRedemptions).orderBy(Gr(t.loyaltyRedemptions.createdAt))}async createLoyaltyRedemption(e){let t=ee(),[r]=await z().insert(t.loyaltyRedemptions).values(e).returning(),[s]=await z().select().from(t.clients).where(se(t.clients.id,e.clientId));return s&&await z().update(t.clients).set({loyaltyPoints:s.loyaltyPoints-e.pointsUsed}).where(se(t.clients.id,e.clientId)),r}async getStaffPerformance(e,t,r){let s=ee(),a=await z().select().from(s.appointments).where(Cn(se(s.appointments.staff,e),wc(s.appointments.date,t),xc(s.appointments.date,r))),o=await z().select().from(s.services),c=new Map(o.map(E=>[E.name,E])),u=0,l=0;for(let E of a){u+=E.total;let _=c.get(E.service)?.commissionPercent||50;l+=E.total*_/100}return{totalAppointments:a.length,totalRevenue:u,totalCommission:l}}},M=new t0;Fa();var nn={validation:D.object({message:D.string(),field:D.string().optional()}),notFound:D.object({message:D.string()}),internal:D.object({message:D.string()})},rn={appointments:{list:{method:"GET",path:"/api/appointments",input:D.object({date:D.string().optional()}).optional(),responses:{200:D.array(D.custom())}},create:{method:"POST",path:"/api/appointments",input:zE,responses:{201:D.custom(),400:nn.validation}},update:{method:"PUT",path:"/api/appointments/:id",input:zE.partial(),responses:{200:D.custom(),404:nn.notFound}},delete:{method:"DELETE",path:"/api/appointments/:id",responses:{204:D.void(),404:nn.notFound}}},services:{list:{method:"GET",path:"/api/services",responses:{200:D.array(D.custom())}},create:{method:"POST",path:"/api/services",input:KE,responses:{201:D.custom(),400:nn.validation}},update:{method:"PATCH",path:"/api/services/:id",input:KE.partial(),responses:{200:D.custom(),404:nn.notFound}},delete:{method:"DELETE",path:"/api/services/:id",responses:{204:D.void(),404:nn.notFound}}},categories:{list:{method:"GET",path:"/api/categories",responses:{200:D.array(D.custom())}},create:{method:"POST",path:"/api/categories",input:XE,responses:{201:D.custom(),400:nn.validation}},update:{method:"PATCH",path:"/api/categories/:id",input:XE.partial(),responses:{200:D.custom(),404:nn.notFound}},delete:{method:"DELETE",path:"/api/categories/:id",responses:{204:D.void(),404:nn.notFound}}},staff:{list:{method:"GET",path:"/api/staff",responses:{200:D.array(D.custom())}},create:{method:"POST",path:"/api/staff",input:JE,responses:{201:D.custom(),400:nn.validation}},update:{method:"PATCH",path:"/api/staff/:id",input:JE.partial(),responses:{200:D.custom(),404:nn.notFound}},delete:{method:"DELETE",path:"/api/staff/:id",responses:{204:D.void(),404:nn.notFound}}},clients:{list:{method:"GET",path:"/api/clients",responses:{200:D.array(D.custom())}},create:{method:"POST",path:"/api/clients",input:qE,responses:{201:D.custom(),400:nn.validation}},update:{method:"PATCH",path:"/api/clients/:id",input:qE.partial(),responses:{200:D.custom(),404:nn.notFound}},delete:{method:"DELETE",path:"/api/clients/:id",responses:{204:D.void(),404:nn.notFound}}}};Fa();var mo=It(require("openid-client"),1),SP=require("openid-client/passport"),Br=It(m3(),1),v0=It(Z3(),1),yP=It(require("memoizee"),1),vP=It(OP(),1);var DP=(0,yP.default)(async()=>await mo.discovery(new URL(process.env.ISSUER_URL??"https://replit.com/oidc"),process.env.REPL_ID),{maxAge:3600*1e3});function bP(){let e=(0,vP.default)(v0.default),t=new e({checkPeriod:864e5});return(0,v0.default)({secret:process.env.SESSION_SECRET||"pregasquad-default-secret",store:t,resave:!1,saveUninitialized:!1,cookie:{httpOnly:!0,secure:!0,maxAge:6048e5}})}function wP(n,e){n.claims=e.claims(),n.access_token=e.access_token,n.refresh_token=e.refresh_token,n.expires_at=n.claims?.exp}async function qee(n){await Pi.upsertUser({id:n.sub,email:n.email,firstName:n.first_name,lastName:n.last_name,profileImageUrl:n.profile_image_url})}async function D0(n){if(n.set("trust proxy",1),n.use(bP()),n.use(Br.default.initialize()),n.use(Br.default.session()),n.get("/health",(a,o)=>{o.status(200).send("OK")}),!process.env.REPL_ID){console.log("Not on Replit - auth routes disabled"),Br.default.serializeUser((a,o)=>o(null,a)),Br.default.deserializeUser((a,o)=>o(null,a)),n.get("/api/login",(a,o)=>{o.json({message:"Auth not available outside Replit"})}),n.get("/api/logout",(a,o)=>{o.redirect("/")});return}let e=await DP(),t=async(a,o)=>{let c={};wP(c,a),await qee(a.claims()),o(null,c)},r=new Set,s=a=>{let o=`replitauth:${a}`;if(!r.has(o)){let c=new SP.Strategy({name:o,config:e,scope:"openid email profile offline_access",callbackURL:`https://${a}/api/callback`},t);Br.default.use(c),r.add(o)}};Br.default.serializeUser((a,o)=>o(null,a)),Br.default.deserializeUser((a,o)=>o(null,a)),n.get("/api/logi
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
TypeError: z(...).insert(...).values(...).returning is not a function
    at t0.createAppointment (/app/dist/index.cjs:3109:1091)
    at /app/dist/index.cjs:3109:12811
    at ca.handle_request (/app/dist/index.cjs:38:3174)
    at u (/app/dist/index.cjs:38:5256)
    at ua.dispatch (/app/dist/index.cjs:38:5055)
    at ca.handle_request (/app/dist/index.cjs:38:3174)
    at /app/dist/index.cjs:38:7930
    at Zi.process_params (/app/dist/index.cjs:38:8475)
    at N (/app/dist/index.cjs:38:7881)
    at m.pass (/app/dist/index.cjs:3071:7077)
Node.js v20.19.6
Application exited with code 1. This usually indicates an application failure. Check that the command used to launch your application is correct.
Instance is unhealthy. Attempting recovery...
Using MySQL/TiDB database
Database connection ready
Push subscriptions table ready
Not on Replit - auth routes disabled
5:21:15 PM [express] serving on port 8000
Instance is healthy. All health checks are passing.
Client connected: oUWjh5ihig4ciwe8AAAB
5:21:24 PM [express] GET /api/appointments/all 304 in 13ms :: [{"id":30015,"date":"2026-01-02","startTime":"10:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30016,"date":"2026-01-02","startTime":"11:00","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":30017,"date":"2026-01-02","startTime":"12:30","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":60,"paid":true,"loyaltyPointsEarned":0},{"id":30018,"date":"2026-01-02","startTime":"12:15","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30019,"date":"2026-01-02","startTime":"13:45","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":150001,"date":"2026-01-03","startTime":"13:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":240003,"date":"2026-01-03","startTime":"14:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":240004,"date":"2026-01-03","startTime":"15:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":450004,"date":"2026-01-04","startTime":"00:30","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":450006,"date":"2026-01-04","startTime":"01:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450007,"date":"2026-01-04","startTime":"02:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450008,"date":"2026-01-04","startTime":"03:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450009,"date":"2026-01-04","startTime":"04:00","duration":15,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":480001,"date":"2026-01-04","startTime":"23:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":570001,"date":"2026-01-05","startTime":"20:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":30,"paid":true,"loyaltyPointsEarned":0},{"id":570002,"date":"2026-01-05","startTime":"00:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":600002,"date":"2026-01-04","startTime":"22:00","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":180,"paid":true,"loyaltyPointsEarned":0}]
5:21:28 PM [express] GET /api/appointments 304 in 11ms :: [{"id":30015,"date":"2026-01-02","startTime":"10:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30016,"date":"2026-01-02","startTime":"11:00","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":30017,"date":"2026-01-02","startTime":"12:30","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":60,"paid":true,"loyaltyPointsEarned":0},{"id":30018,"date":"2026-01-02","startTime":"12:15","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30019,"date":"2026-01-02","startTime":"13:45","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":150001,"date":"2026-01-03","startTime":"13:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":240003,"date":"2026-01-03","startTime":"14:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":240004,"date":"2026-01-03","startTime":"15:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":450004,"date":"2026-01-04","startTime":"00:30","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":450006,"date":"2026-01-04","startTime":"01:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450007,"date":"2026-01-04","startTime":"02:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450008,"date":"2026-01-04","startTime":"03:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450009,"date":"2026-01-04","startTime":"04:00","duration":15,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":480001,"date":"2026-01-04","startTime":"23:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":570001,"date":"2026-01-05","startTime":"20:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":30,"paid":true,"loyaltyPointsEarned":0},{"id":570002,"date":"2026-01-05","startTime":"00:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":600002,"date":"2026-01-04","startTime":"22:00","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":180,"paid":true,"loyaltyPointsEarned":0}]
5:21:28 PM [express] GET /api/appointments 304 in 53ms :: []
5:21:58 PM [express] GET /api/appointments 304 in 11ms :: [{"id":30015,"date":"2026-01-02","startTime":"10:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30016,"date":"2026-01-02","startTime":"11:00","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":30017,"date":"2026-01-02","startTime":"12:30","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":60,"paid":true,"loyaltyPointsEarned":0},{"id":30018,"date":"2026-01-02","startTime":"12:15","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30019,"date":"2026-01-02","startTime":"13:45","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":150001,"date":"2026-01-03","startTime":"13:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":240003,"date":"2026-01-03","startTime":"14:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":240004,"date":"2026-01-03","startTime":"15:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":450004,"date":"2026-01-04","startTime":"00:30","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":450006,"date":"2026-01-04","startTime":"01:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450007,"date":"2026-01-04","startTime":"02:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450008,"date":"2026-01-04","startTime":"03:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450009,"date":"2026-01-04","startTime":"04:00","duration":15,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":480001,"date":"2026-01-04","startTime":"23:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":570001,"date":"2026-01-05","startTime":"20:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":30,"paid":true,"loyaltyPointsEarned":0},{"id":570002,"date":"2026-01-05","startTime":"00:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":600002,"date":"2026-01-04","startTime":"22:00","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":180,"paid":true,"loyaltyPointsEarned":0}]
5:21:58 PM [express] GET /api/appointments 304 in 12ms :: []
Client disconnected: oUWjh5ihig4ciwe8AAAB
5:23:30 PM [express] GET /api/appointments/all 304 in 107ms :: [{"id":30015,"date":"2026-01-02","startTime":"10:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30016,"date":"2026-01-02","startTime":"11:00","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":30017,"date":"2026-01-02","startTime":"12:30","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":60,"paid":true,"loyaltyPointsEarned":0},{"id":30018,"date":"2026-01-02","startTime":"12:15","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30019,"date":"2026-01-02","startTime":"13:45","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":150001,"date":"2026-01-03","startTime":"13:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":240003,"date":"2026-01-03","startTime":"14:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":240004,"date":"2026-01-03","startTime":"15:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":450004,"date":"2026-01-04","startTime":"00:30","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":450006,"date":"2026-01-04","startTime":"01:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450007,"date":"2026-01-04","startTime":"02:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450008,"date":"2026-01-04","startTime":"03:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450009,"date":"2026-01-04","startTime":"04:00","duration":15,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":480001,"date":"2026-01-04","startTime":"23:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":570001,"date":"2026-01-05","startTime":"20:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":30,"paid":true,"loyaltyPointsEarned":0},{"id":570002,"date":"2026-01-05","startTime":"00:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":600002,"date":"2026-01-04","startTime":"22:00","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":180,"paid":true,"loyaltyPointsEarned":0}]
5:23:30 PM [express] GET /api/appointments 304 in 106ms :: []
Client connected: pDH8yVZVjlRaGUG5AAAD
5:23:30 PM [express] GET /api/staff 304 in 96ms :: [{"id":1,"name":"Hayat","color":"#d63384","phone":null,"email":null,"baseSalary":0},{"id":2,"name":"NOFL","color":"#20c997","phone":null,"email":null,"baseSalary":0},{"id":3,"name":"HASSAN","color":"#0d6efd","phone":null,"email":null,"baseSalary":0}]
5:23:30 PM [express] GET /api/appointments 304 in 100ms :: [{"id":30015,"date":"2026-01-02","startTime":"10:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30016,"date":"2026-01-02","startTime":"11:00","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":30017,"date":"2026-01-02","startTime":"12:30","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":60,"paid":true,"loyaltyPointsEarned":0},{"id":30018,"date":"2026-01-02","startTime":"12:15","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30019,"date":"2026-01-02","startTime":"13:45","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":150001,"date":"2026-01-03","startTime":"13:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":240003,"date":"2026-01-03","startTime":"14:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":240004,"date":"2026-01-03","startTime":"15:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":450004,"date":"2026-01-04","startTime":"00:30","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":450006,"date":"2026-01-04","startTime":"01:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450007,"date":"2026-01-04","startTime":"02:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450008,"date":"2026-01-04","startTime":"03:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450009,"date":"2026-01-04","startTime":"04:00","duration":15,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":480001,"date":"2026-01-04","startTime":"23:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":570001,"date":"2026-01-05","startTime":"20:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":30,"paid":true,"loyaltyPointsEarned":0},{"id":570002,"date":"2026-01-05","startTime":"00:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":600002,"date":"2026-01-04","startTime":"22:00","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":180,"paid":true,"loyaltyPointsEarned":0}]
5:23:30 PM [express] GET /api/services 304 in 503ms :: [{"id":1,"name":"Maquillage Simple","price":100,"duration":30,"category":"Beauté","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":2,"name":"Maquillage et faux-cils","price":150,"duration":45,"category":"Beauté","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":3,"name":"Maquillage Pro","price":300,"duration":60,"category":"Beauté","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":4,"name":"Maquillage Fiancé & Marié","price":600,"duration":90,"category":"Beauté","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":5,"name":"Extension de cils Permanent","price":350,"duration":90,"category":"Beauté","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":6,"name":"Cils Normaux","price":50,"duration":30,"category":"Beauté","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":7,"name":"Cils Mèche/Mèche","price":100,"duration":45,"category":"Beauté","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":8,"name":"Cils Naturel","price":150,"duration":60,"category":"Beauté","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":9,"name":"Coloration des Sourcils","price":20,"duration":15,"category":"Beauté","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":10,"name":"Shampoing","price":20,"duration":15,"category":"Coiffure","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":11,"name":"Brushing","price":50,"duration":30,"category":"Coiffure","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":12,"name":"Coupe Unique","price":40,"duration":30,"category":"Coiffure","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":13,"name":"Coupe et Brushing","price":80,"duration":60,"category":"Coiffure","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":14,"name":"Soin Cheveux","price":100,"duration":45,"category":"Coiffure","linkedProductId":null,"commissionPercent":40,"loyaltyPointsMultiplier":1},{"id":15,"name":"Soin Tanino","price":200,"duration":75,"category":"Coiffure","linkedProductId":null,"commissionPercent":40,"loyaltyPointsMultiplier":1},{"id":16,"name":"Coloration","price":300,"duration":90,"category":"Coiffure","linkedProductId":2,"commissionPercent":40,"loyaltyPointsMultiplier":1},{"id":17,"name":"Mèche","price":300,"duration":90,"category":"Coiffure","linkedProductId":30001,"commissionPercent":40,"loyaltyPointsMultiplier":1},{"id":18,"name":"Permanent","price":300,"duration":90,"category":"Coiffure","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":19,"name":"Défrisage","price":300,"duration":90,"category":"Coiffure","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":20,"name":"Balayage","price":600,"duration":120,"category":"Coiffure","linkedProductId":null,"commissionPercent":40,"loyaltyPointsMultiplier":1},{"id":21,"name":"proteine","price":700,"duration":120,"category":"Coiffure","linkedProductId":1,"commissionPercent":40,"loyaltyPointsMultiplier":1},{"id":22,"name":"Tanino Plastie","price":1000,"duration":180,"category":"Coiffure","linkedProductId":null,"commissionPercent":40,"loyaltyPointsMultiplier":1},{"id":23,"name":"Chignon","price":150,"duration":60,"category":"Coiffure","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":24,"name":"Chignon marié","price":600,"duration":120,"category":"Coiffure","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":25,"name":"Manicure Simple","price":50,"duration":30,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":26,"name":"Manicure + vernis permanent","price":150,"duration":60,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":27,"name":"Pose vernis simple","price":30,"duration":20,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":28,"name":"Pédicure simple","price":100,"duration":45,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":29,"name":"Pédicure + vernis permanent","price":200,"duration":75,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":30,"name":"SPA Manicure","price":80,"duration":45,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":31,"name":"SPA Pédicure","price":150,"duration":60,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":32,"name":"Soin Paraffine","price":40,"duration":30,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":33,"name":"Dépose vernis permanent","price":40,"duration":20,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":34,"name":"Dépose Gel ou Résine","price":80,"duration":30,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":35,"name":"Ongle Normale","price":100,"duration":45,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":36,"name":"Ongle en Gel","price":300,"duration":90,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":37,"name":"Pose vernis permanent","price":100,"duration":45,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":38,"name":"Remplissage","price":150,"duration":60,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":39,"name":"Baby boomer ou French","price":50,"duration":30,"category":"Onglerie","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":40,"name":"Sourcils","price":30,"duration":15,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":41,"name":"Duvet","price":20,"duration":10,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":42,"name":"Menton","price":20,"duration":10,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":43,"name":"Visage","price":70,"duration":30,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":44,"name":"Aisselles","price":30,"duration":15,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":45,"name":"Avant-Bras","price":50,"duration":20,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":46,"name":"Bras Complet","price":80,"duration":30,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":47,"name":"Ventre","price":60,"duration":20,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":48,"name":"Bord Maillot","price":50,"duration":20,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":49,"name":"Maillot Brésilien","price":100,"duration":30,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":50,"name":"Maillot Complet","price":120,"duration":45,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":51,"name":"Demi-Jambe","price":60,"duration":30,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":52,"name":"Jambe Complet","price":100,"duration":45,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":53,"name":"Dos","price":100,"duration":30,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":54,"name":"Cire Complet","price":380,"duration":120,"category":"Épilation à la Cire","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":55,"name":"Gommage + Masque","price":100,"duration":30,"category":"Soins du Visage","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":56,"name":"Mini soin de Visage","price":150,"duration":30,"category":"Soins du Visage","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":57,"name":"Soin Classique","price":200,"duration":45,"category":"Soins du Visage","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":58,"name":"Soin Eclaircissant","price":300,"duration":60,"category":"Soins du Visage","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":59,"name":"Soin Hydratant","price":300,"duration":60,"category":"Soins du Visage","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":60,"name":"Soin Hydrafaciale","price":450,"duration":90,"category":"Soins du Visage","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1},{"id":32492,"name":"Brushing+shampoine","price":70,"duration":30,"category":"Coiffure","linkedProductId":null,"commissionPercent":50,"loyaltyPointsMultiplier":1}]
5:24:00 PM [express] GET /api/appointments 304 in 9ms :: []
5:24:00 PM [express] GET /api/appointments 304 in 8ms :: [{"id":30015,"date":"2026-01-02","startTime":"10:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30016,"date":"2026-01-02","startTime":"11:00","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":30017,"date":"2026-01-02","startTime":"12:30","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":60,"paid":true,"loyaltyPointsEarned":0},{"id":30018,"date":"2026-01-02","startTime":"12:15","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30019,"date":"2026-01-02","startTime":"13:45","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":150001,"date":"2026-01-03","startTime":"13:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":240003,"date":"2026-01-03","startTime":"14:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":240004,"date":"2026-01-03","startTime":"15:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":450004,"date":"2026-01-04","startTime":"00:30","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":450006,"date":"2026-01-04","startTime":"01:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450007,"date":"2026-01-04","startTime":"02:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450008,"date":"2026-01-04","startTime":"03:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450009,"date":"2026-01-04","startTime":"04:00","duration":15,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":480001,"date":"2026-01-04","startTime":"23:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":570001,"date":"2026-01-05","startTime":"20:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":30,"paid":true,"loyaltyPointsEarned":0},{"id":570002,"date":"2026-01-05","startTime":"00:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":600002,"date":"2026-01-04","startTime":"22:00","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":180,"paid":true,"loyaltyPointsEarned":0}]
/app/dist/index.cjs:3109
      `);console.log("Push subscriptions table ready")}catch(n){console.error("Failed to create push_subscriptions table:",n)}}Ya();Ya();var e0=class{async getUser(e){let t=ee(),[r]=await z().select().from(t.users).where(se(t.users.id,e));return r}async upsertUser(e){let t=ee();await this.getUser(e.id)?await z().update(t.users).set({...e,updatedAt:new Date}).where(se(t.users.id,e.id)):await z().insert(t.users).values(e);let[s]=await z().select().from(t.users).where(se(t.users.id,e.id));return s}},Pi=new e0;var t0=class{getUser=Pi.getUser;upsertUser=Pi.upsertUser;async getAppointments(e){let t=ee();return e?await z().select().from(t.appointments).where(se(t.appointments.date,e)):await z().select().from(t.appointments)}async getAppointmentsByDateRange(e,t){let r=ee();return await z().select().from(r.appointments).where(Cn(wc(r.appointments.date,e),xc(r.appointments.date,t)))}async getAppointment(e){let t=ee(),[r]=await z().select().from(t.appointments).where(se(t.appointments.id,e));return r}async createAppointment(e){let t=ee(),[r]=await z().insert(t.appointments).values(e).returning();return r}async updateAppointment(e,t){let r=ee(),[s]=await z().update(r.appointments).set(t).where(se(r.appointments.id,e)).returning();return s}async deleteAppointment(e){let t=ee();await z().delete(t.appointments).where(se(t.appointments.id,e))}async getServices(){let e=ee();return await z().select().from(e.services)}async createService(e){let t=ee(),[r]=await z().insert(t.services).values(e).returning();return r}async updateService(e,t){let r=ee(),[s]=await z().update(r.services).set(t).where(se(r.services.id,e)).returning();return s}async deleteService(e){let t=ee();await z().delete(t.services).where(se(t.services.id,e))}async getCategories(){let e=ee();return await z().select().from(e.categories)}async createCategory(e){let t=ee(),[r]=await z().insert(t.categories).values(e).returning();return r}async updateCategory(e,t){let r=ee(),[s]=await z().update(r.categories).set(t).where(se(r.categories.id,e)).returning();return s}async deleteCategory(e){let t=ee();await z().delete(t.categories).where(se(t.categories.id,e))}async getStaff(){let e=ee();return await z().select().from(e.staff)}async createStaff(e){let t=ee(),[r]=await z().insert(t.staff).values(e).returning();return r}async updateStaff(e,t){let r=ee(),[s]=await z().update(r.staff).set(t).where(se(r.staff.id,e)).returning();return s}async deleteStaff(e){let t=ee();await z().delete(t.staff).where(se(t.staff.id,e))}async getProducts(){let e=ee();return await z().select().from(e.products)}async getProduct(e){let t=ee(),[r]=await z().select().from(t.products).where(se(t.products.id,e));return r}async getProductByName(e){let t=ee(),[r]=await z().select().from(t.products).where(se(t.products.name,e));return r}async getLowStockProducts(){let e=ee();return(await z().select().from(e.products)).filter(r=>r.quantity<=r.lowStockThreshold)}async updateProductQuantity(e,t){let r=ee(),[s]=await z().update(r.products).set({quantity:t}).where(se(r.products.id,e)).returning();if(!s)throw new Error("Product not found");return s}async updateProduct(e,t){let r=ee(),[s]=await z().update(r.products).set(t).where(se(r.products.id,e)).returning();return s}async createProduct(e){let t=ee(),[r]=await z().insert(t.products).values(e).returning();return r}async deleteProduct(e){let t=ee();await z().delete(t.products).where(se(t.products.id,e))}async getClients(){let e=ee();return await z().select().from(e.clients).orderBy(Gr(e.clients.createdAt))}async getClient(e){let t=ee(),[r]=await z().select().from(t.clients).where(se(t.clients.id,e));return r}async createClient(e){let t=ee(),[r]=await z().insert(t.clients).values(e).returning();return r}async updateClient(e,t){let r=ee(),[s]=await z().update(r.clients).set(t).where(se(r.clients.id,e)).returning();return s}async deleteClient(e){let t=ee();await z().delete(t.clients).where(se(t.clients.id,e))}async updateClientLoyalty(e,t,r){let s=ee(),[a]=await z().select().from(s.clients).where(se(s.clients.id,e));if(!a)throw new Error("Client not found");let[o]=await z().update(s.clients).set({loyaltyPoints:a.loyaltyPoints+t,totalVisits:a.totalVisits+1,totalSpent:a.totalSpent+r}).where(se(s.clients.id,e)).returning();return o}async getClientAppointments(e){let t=ee();return await z().select().from(t.appointments).where(se(t.appointments.clientId,e)).orderBy(Gr(t.appointments.date))}async getCharges(){let e=ee();return await z().select().from(e.charges).orderBy(Gr(e.charges.createdAt))}async createCharge(e){let t=ee(),[r]=await z().insert(t.charges).values(e).returning();return r}async deleteCharge(e){let t=ee();await z().delete(t.charges).where(se(t.charges.id,e))}async getStaffDeductions(){let e=ee();return await z().select().from(e.staffDeductions).orderBy(Gr(e.staffDeductions.createdAt))}async createStaffDeduction(e){let t=ee(),[r]=await z().insert(t.staffDeductions).values(e).returning();return r}async deleteStaffDeduction(e){let t=ee();await z().delete(t.staffDeductions).where(se(t.staffDeductions.id,e))}async getExpenseCategories(){let e=ee();return await z().select().from(e.expenseCategories)}async createExpenseCategory(e){let t=ee(),[r]=await z().insert(t.expenseCategories).values(e).returning();return r}async deleteExpenseCategory(e){let t=ee();await z().delete(t.expenseCategories).where(se(t.expenseCategories.id,e))}async getLoyaltyRedemptions(e){let t=ee();return e?await z().select().from(t.loyaltyRedemptions).where(se(t.loyaltyRedemptions.clientId,e)).orderBy(Gr(t.loyaltyRedemptions.createdAt)):await z().select().from(t.loyaltyRedemptions).orderBy(Gr(t.loyaltyRedemptions.createdAt))}async createLoyaltyRedemption(e){let t=ee(),[r]=await z().insert(t.loyaltyRedemptions).values(e).returning(),[s]=await z().select().from(t.clients).where(se(t.clients.id,e.clientId));return s&&await z().update(t.clients).set({loyaltyPoints:s.loyaltyPoints-e.pointsUsed}).where(se(t.clients.id,e.clientId)),r}async getStaffPerformance(e,t,r){let s=ee(),a=await z().select().from(s.appointments).where(Cn(se(s.appointments.staff,e),wc(s.appointments.date,t),xc(s.appointments.date,r))),o=await z().select().from(s.services),c=new Map(o.map(E=>[E.name,E])),u=0,l=0;for(let E of a){u+=E.total;let _=c.get(E.service)?.commissionPercent||50;l+=E.total*_/100}return{totalAppointments:a.length,totalRevenue:u,totalCommission:l}}},M=new t0;Fa();var nn={validation:D.object({message:D.string(),field:D.string().optional()}),notFound:D.object({message:D.string()}),internal:D.object({message:D.string()})},rn={appointments:{list:{method:"GET",path:"/api/appointments",input:D.object({date:D.string().optional()}).optional(),responses:{200:D.array(D.custom())}},create:{method:"POST",path:"/api/appointments",input:zE,responses:{201:D.custom(),400:nn.validation}},update:{method:"PUT",path:"/api/appointments/:id",input:zE.partial(),responses:{200:D.custom(),404:nn.notFound}},delete:{method:"DELETE",path:"/api/appointments/:id",responses:{204:D.void(),404:nn.notFound}}},services:{list:{method:"GET",path:"/api/services",responses:{200:D.array(D.custom())}},create:{method:"POST",path:"/api/services",input:KE,responses:{201:D.custom(),400:nn.validation}},update:{method:"PATCH",path:"/api/services/:id",input:KE.partial(),responses:{200:D.custom(),404:nn.notFound}},delete:{method:"DELETE",path:"/api/services/:id",responses:{204:D.void(),404:nn.notFound}}},categories:{list:{method:"GET",path:"/api/categories",responses:{200:D.array(D.custom())}},create:{method:"POST",path:"/api/categories",input:XE,responses:{201:D.custom(),400:nn.validation}},update:{method:"PATCH",path:"/api/categories/:id",input:XE.partial(),responses:{200:D.custom(),404:nn.notFound}},delete:{method:"DELETE",path:"/api/categories/:id",responses:{204:D.void(),404:nn.notFound}}},staff:{list:{method:"GET",path:"/api/staff",responses:{200:D.array(D.custom())}},create:{method:"POST",path:"/api/staff",input:JE,responses:{201:D.custom(),400:nn.validation}},update:{method:"PATCH",path:"/api/staff/:id",input:JE.partial(),responses:{200:D.custom(),404:nn.notFound}},delete:{method:"DELETE",path:"/api/staff/:id",responses:{204:D.void(),404:nn.notFound}}},clients:{list:{method:"GET",path:"/api/clients",responses:{200:D.array(D.custom())}},create:{method:"POST",path:"/api/clients",input:qE,responses:{201:D.custom(),400:nn.validation}},update:{method:"PATCH",path:"/api/clients/:id",input:qE.partial(),responses:{200:D.custom(),404:nn.notFound}},delete:{method:"DELETE",path:"/api/clients/:id",responses:{204:D.void(),404:nn.notFound}}}};Fa();var mo=It(require("openid-client"),1),SP=require("openid-client/passport"),Br=It(m3(),1),v0=It(Z3(),1),yP=It(require("memoizee"),1),vP=It(OP(),1);var DP=(0,yP.default)(async()=>await mo.discovery(new URL(process.env.ISSUER_URL??"https://replit.com/oidc"),process.env.REPL_ID),{maxAge:3600*1e3});function bP(){let e=(0,vP.default)(v0.default),t=new e({checkPeriod:864e5});return(0,v0.default)({secret:process.env.SESSION_SECRET||"pregasquad-default-secret",store:t,resave:!1,saveUninitialized:!1,cookie:{httpOnly:!0,secure:!0,maxAge:6048e5}})}function wP(n,e){n.claims=e.claims(),n.access_token=e.access_token,n.refresh_token=e.refresh_token,n.expires_at=n.claims?.exp}async function qee(n){await Pi.upsertUser({id:n.sub,email:n.email,firstName:n.first_name,lastName:n.last_name,profileImageUrl:n.profile_image_url})}async function D0(n){if(n.set("trust proxy",1),n.use(bP()),n.use(Br.default.initialize()),n.use(Br.default.session()),n.get("/health",(a,o)=>{o.status(200).send("OK")}),!process.env.REPL_ID){console.log("Not on Replit - auth routes disabled"),Br.default.serializeUser((a,o)=>o(null,a)),Br.default.deserializeUser((a,o)=>o(null,a)),n.get("/api/login",(a,o)=>{o.json({message:"Auth not available outside Replit"})}),n.get("/api/logout",(a,o)=>{o.redirect("/")});return}let e=await DP(),t=async(a,o)=>{let c={};wP(c,a),await qee(a.claims()),o(null,c)},r=new Set,s=a=>{let o=`replitauth:${a}`;if(!r.has(o)){let c=new SP.Strategy({name:o,config:e,scope:"openid email profile offline_access",callbackURL:`https://${a}/api/callback`},t);Br.default.use(c),r.add(o)}};Br.default.serializeUser((a,o)=>o(null,a)),Br.default.deserializeUser((a,o)=>o(null,a)),n.get("/api/logi
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
TypeError: z(...).insert(...).values(...).returning is not a function
    at t0.createAppointment (/app/dist/index.cjs:3109:1091)
    at /app/dist/index.cjs:3109:12811
    at ca.handle_request (/app/dist/index.cjs:38:3174)
    at u (/app/dist/index.cjs:38:5256)
    at ua.dispatch (/app/dist/index.cjs:38:5055)
    at ca.handle_request (/app/dist/index.cjs:38:3174)
    at /app/dist/index.cjs:38:7930
    at Zi.process_params (/app/dist/index.cjs:38:8475)
    at N (/app/dist/index.cjs:38:7881)
    at m.pass (/app/dist/index.cjs:3071:7077)
Node.js v20.19.6
Application exited with code 1. This usually indicates an application failure. Check that the command used to launch your application is correct.
Instance stopped.
Instance created. Preparing to start...
Instance is healthy. All health checks are passing.
Using MySQL/TiDB database
Database connection ready
Push subscriptions table ready
Not on Replit - auth routes disabled
5:25:25 PM [express] serving on port 8000
5:25:25 PM [express] GET /api/appointments 304 in 15ms :: [{"id":30015,"date":"2026-01-02","startTime":"10:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30016,"date":"2026-01-02","startTime":"11:00","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":30017,"date":"2026-01-02","startTime":"12:30","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":60,"paid":true,"loyaltyPointsEarned":0},{"id":30018,"date":"2026-01-02","startTime":"12:15","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30019,"date":"2026-01-02","startTime":"13:45","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":150001,"date":"2026-01-03","startTime":"13:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":240003,"date":"2026-01-03","startTime":"14:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":240004,"date":"2026-01-03","startTime":"15:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":450004,"date":"2026-01-04","startTime":"00:30","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":450006,"date":"2026-01-04","startTime":"01:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450007,"date":"2026-01-04","startTime":"02:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450008,"date":"2026-01-04","startTime":"03:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450009,"date":"2026-01-04","startTime":"04:00","duration":15,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":480001,"date":"2026-01-04","startTime":"23:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":570001,"date":"2026-01-05","startTime":"20:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":30,"paid":true,"loyaltyPointsEarned":0},{"id":570002,"date":"2026-01-05","startTime":"00:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":600002,"date":"2026-01-04","startTime":"22:00","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":180,"paid":true,"loyaltyPointsEarned":0}]
5:25:26 PM [express] GET /api/appointments 200 in 168ms :: []
5:25:50 PM [express] GET /api/appointments 200 in 8ms :: []
5:25:50 PM [express] GET /api/appointments 200 in 12ms :: [{"id":30015,"date":"2026-01-02","startTime":"10:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30016,"date":"2026-01-02","startTime":"11:00","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":30017,"date":"2026-01-02","startTime":"12:30","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":60,"paid":true,"loyaltyPointsEarned":0},{"id":30018,"date":"2026-01-02","startTime":"12:15","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30019,"date":"2026-01-02","startTime":"13:45","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":150001,"date":"2026-01-03","startTime":"13:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":240003,"date":"2026-01-03","startTime":"14:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":240004,"date":"2026-01-03","startTime":"15:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":450004,"date":"2026-01-04","startTime":"00:30","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":450006,"date":"2026-01-04","startTime":"01:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450007,"date":"2026-01-04","startTime":"02:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450008,"date":"2026-01-04","startTime":"03:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450009,"date":"2026-01-04","startTime":"04:00","duration":15,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":480001,"date":"2026-01-04","startTime":"23:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":570001,"date":"2026-01-05","startTime":"20:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":30,"paid":true,"loyaltyPointsEarned":0},{"id":570002,"date":"2026-01-05","startTime":"00:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":600002,"date":"2026-01-04","startTime":"22:00","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":180,"paid":true,"loyaltyPointsEarned":0}]
5:26:18 PM [express] GET /api/appointments 200 in 10ms :: []
5:26:18 PM [express] GET /api/appointments 304 in 9ms :: [{"id":30015,"date":"2026-01-02","startTime":"10:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30016,"date":"2026-01-02","startTime":"11:00","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":30017,"date":"2026-01-02","startTime":"12:30","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":60,"paid":true,"loyaltyPointsEarned":0},{"id":30018,"date":"2026-01-02","startTime":"12:15","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30019,"date":"2026-01-02","startTime":"13:45","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":150001,"date":"2026-01-03","startTime":"13:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":240003,"date":"2026-01-03","startTime":"14:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":240004,"date":"2026-01-03","startTime":"15:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":450004,"date":"2026-01-04","startTime":"00:30","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":450006,"date":"2026-01-04","startTime":"01:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450007,"date":"2026-01-04","startTime":"02:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450008,"date":"2026-01-04","startTime":"03:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450009,"date":"2026-01-04","startTime":"04:00","duration":15,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":480001,"date":"2026-01-04","startTime":"23:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":570001,"date":"2026-01-05","startTime":"20:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":30,"paid":true,"loyaltyPointsEarned":0},{"id":570002,"date":"2026-01-05","startTime":"00:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":600002,"date":"2026-01-04","startTime":"22:00","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":180,"paid":true,"loyaltyPointsEarned":0}]
Client connected: nXDB8mf00iXCRoxHAAAD
5:26:30 PM [express] GET /api/appointments 304 in 14ms :: [{"id":30015,"date":"2026-01-02","startTime":"10:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30016,"date":"2026-01-02","startTime":"11:00","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":30017,"date":"2026-01-02","startTime":"12:30","duration":60,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":60,"paid":true,"loyaltyPointsEarned":0},{"id":30018,"date":"2026-01-02","startTime":"12:15","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":30019,"date":"2026-01-02","startTime":"13:45","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"HASSAN","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":150001,"date":"2026-01-03","startTime":"13:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":240003,"date":"2026-01-03","startTime":"14:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":240004,"date":"2026-01-03","startTime":"15:30","duration":30,"client":"","clientId":null,"service":"Brushing+shampoine","staff":"NOFL","price":70,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":450004,"date":"2026-01-04","startTime":"00:30","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":450006,"date":"2026-01-04","startTime":"01:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450007,"date":"2026-01-04","startTime":"02:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450008,"date":"2026-01-04","startTime":"03:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":450009,"date":"2026-01-04","startTime":"04:00","duration":15,"client":"","clientId":null,"service":"","staff":"NOFL","price":0,"total":25,"paid":true,"loyaltyPointsEarned":0},{"id":480001,"date":"2026-01-04","startTime":"23:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":70,"paid":true,"loyaltyPointsEarned":0},{"id":570001,"date":"2026-01-05","startTime":"20:30","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":30,"paid":true,"loyaltyPointsEarned":0},{"id":570002,"date":"2026-01-05","startTime":"00:00","duration":30,"client":"","clientId":null,"service":"Brushing","staff":"NOFL","price":50,"total":50,"paid":true,"loyaltyPointsEarned":0},{"id":600002,"date":"2026-01-04","startTime":"22:00","duration":60,"client":"","clientId":null,"service":"","staff":"Hayat","price":0,"total":180,"paid":true,"loyaltyPointsEarned":0}]
